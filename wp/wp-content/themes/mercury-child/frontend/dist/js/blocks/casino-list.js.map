{"version":3,"file":"js/blocks/casino-list.js","mappings":"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","sources":["webpack://@mercury-child/wp/./src/blocks/casino-list/casino-list.scss?2aed","webpack://@mercury-child/wp/webpack/bootstrap","webpack://@mercury-child/wp/webpack/runtime/make namespace object","webpack://@mercury-child/wp/./src/blocks/casino-list/casino-list.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './casino-list.scss'\n\ninterface ResponseData {\n  html: string\n  message: string\n}\n\nfunction init() {\n  const btns = document.querySelectorAll<HTMLButtonElement>('.lb-casino-list__load-more')\n\n  btns.forEach((btn) => {\n    btn.addEventListener('click', triggetLoad)\n  })\n}\n\nasync function triggetLoad(e: MouseEvent) {\n  const btn = e.currentTarget as HTMLButtonElement\n  const container = btn.closest<HTMLElement>('.lb-casino-list')\n\n  const preparedQuery = prepareQuery(btn.dataset.query, {\n    paged: (+btn.dataset.currentPage || 1) + 1,\n  })\n\n  btn.classList.add('lb-button--pending')\n  btn.disabled = true\n\n  try {\n    const data = await load(preparedQuery)\n    render(data.html, container)\n  } catch (error) {\n    console.error(error)\n  }\n\n  btn.classList.remove('lb-button--pending')\n  btn.disabled = false\n}\n\nasync function load(query?: string) {\n  const res = await fetch(`/wp-json/aces/v1/html/casinos?${query || ''}`)\n  const data = (await res.json()) as ResponseData\n  return data\n}\n\nfunction prepareQuery(query: string, data?: { paged?: number | string }) {\n  const params = new URLSearchParams(query)\n\n  Object.keys(data || {}).forEach((key) => {\n    params.set(`query[${key}]`, data[key] + '')\n  })\n\n  return params.toString()\n}\n\nfunction render(html: string, container: HTMLElement) {\n  const listEl = container.querySelector<HTMLElement>('.lb-casino-list__list')\n  const btn = container.querySelector<HTMLElement>('.lb-casino-list__load-more')\n\n  listEl.insertAdjacentHTML('beforeend', html)\n  ;(window as any).CasinoCardsInit(listEl)\n  ;(window as any).initPromoButton(listEl)\n\n  btn.dataset.currentPage = (+btn.dataset.currentPage || 1) + 1 + ''\n\n  if (+btn.dataset.currentPage >= +btn.dataset.totalPages) btn.style.display = 'none'\n}\n\ninit()\n"],"names":["init","btns","document","querySelectorAll","forEach","btn","addEventListener","triggetLoad","e","currentTarget","container","closest","preparedQuery","prepareQuery","dataset","query","paged","currentPage","classList","add","disabled","data","load","render","html","error","console","remove","res","fetch","json","params","URLSearchParams","Object","keys","key","set","toString","listEl","querySelector","insertAdjacentHTML","window","CasinoCardsInit","initPromoButton","totalPages","style","display"],"sourceRoot":""}